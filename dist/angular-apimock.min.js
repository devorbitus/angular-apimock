/*! Angular API Mock v0.2.0
 * Licensed with MIT
 * Made with â™¥ from Seriema + Redhorn */
angular.module("apiMock",[]).config(["$httpProvider",function(a){a.interceptors.push("httpInterceptor")}]).provider("apiMock",function(){function a(a){var b={status:a,headers:{"Content-Type":"text/html; charset=utf-8",Server:"Angular ApiMock"}};return j.reject(b)}function b(a){var b=e(a);return void 0===b&&(b=f()),b}function c(a){if(!p(a.url))return a;var b=a.url.substring(r.apiPath.length);a.url=r.mockDataPath+b;var c=/[a-zA-z0-9/.\-]*/;return a.url=c.exec(a.url)[0],"/"===a.url[a.url.length-1]&&(a.url=a.url.slice(0,-1)),a.url+="."+a.method.toLowerCase()+".json",a}function d(a){var b,c=/apimock/i;return angular.forEach(a,function(a,d){c.test(d)&&(b=a)}),b}function e(a){return d(a)}function f(){return d(i.search())}function g(a){switch(typeof a){case"number":if(0!==a)return{type:"respond",value:a};break;case"string":if("auto"===a.toLowerCase())return{type:"recover"};if("true"===a.toLowerCase())return{type:"reroute"};break;case"boolean":if(a===!0)return{type:"reroute"}}return{type:"ignore"}}function h(a,b){i=a,j=b}var i,j,k="/mock_data",l="/api",m=[],n=function(a){p(a.url)&&m.push(a)},o=function(a){var b=!1;return angular.forEach(m,function(c,d){c.method===a.method&&c.url===a.url&&(b=!0,m.splice(d,1))}),b},p=function(a){return 0===a.indexOf(r.apiPath)},q=h.prototype;q._countFallbacks=function(){return m.length},q.onRequest=function(d){var e=b(d),f=g(e);switch(f.type){case"reroute":return c(d);case"recover":return n(d),d;case"respond":return a(f.value);case"ignore":return d;default:return d}},q.onResponse=function(a){return o(a),a},q.recover=function(a){return void 0===a.config?!1:o(a.config)?c(a.config):!1};var r={mockDataPath:k,apiPath:l};this.config=function(a){angular.extend(r,a)},this.$get=["$location","$q",function(a,b){return new h(a,b)}]}).service("httpInterceptor",["$q","apiMock",function(a,b){this.request=function(c){return c=b.onRequest(c),c||a.when(c)},this.response=function(c){return c=b.onResponse(c),c||a.when(c)},this.responseError=function(c){return b.recover(c)||a.reject(c)}}]);